package main

import (
	"encoding/hex"
	"fmt"
	"os"

	"github.com/smartbch/moeingaot/maot"
)

var codeHex = "608060405234801561001057600080fd5b5061015c806100206000396000f3fe608060405234801561001057600080fd5b506004361061002b5760003560e01c8063677342ce14610030575b600080fd5b61004361003e3660046100c5565b610055565b60405190815260200160405180910390f35b600060038211156100b6575080600061006f6002836100de565b61007a906001610100565b90505b818110156100b05790508060028161009581866100de565b61009f9190610100565b6100a991906100de565b905061007d565b50919050565b81156100c0575060015b919050565b6000602082840312156100d757600080fd5b5035919050565b6000826100fb57634e487b7160e01b600052601260045260246000fd5b500490565b6000821982111561012157634e487b7160e01b600052601160045260246000fd5b50019056fea26469706673582212203ee13d515f23fa652121c6f07ae33b2b7bdf45aeef702dabab3a7a22f088167564736f6c634300080d0033"

func main() {
	if len(os.Args) != 2 {
		fmt.Printf("Usage: %s instrexe|gen\n", os.Args[0])
	}
	if os.Args[1] == "instrexe" {
		maot.DumpInstrExeFiles()
	} else if os.Args[1] == "gen" {
		code, _ := hex.DecodeString(codeHex)
		maot.CodeToFile(maot.EVMC_ISTANBUL, code)
	} else {
		fmt.Printf("Usage: %s instrexe|gen\n", os.Args[0])
	}
}
